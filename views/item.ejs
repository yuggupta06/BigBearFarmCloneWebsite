<%- include('partials/header');%>
<div class="h-[150px]"></div>
<div>
    <div class="flex flex-col sm:flex-row sm:pl-[180px] sm:gap-[100px] m-4">
        <div class="flex flex-col items-center">
            <!-- Main Image -->
            <div class="mb-4">
                <img id="mainImage" src="<%= Item.src %>" class="w-[400px]" onclick="openImageInCenter()">
            </div>
            
            <!-- Thumbnail Images -->
            <div class="flex flex-row -ml-16">
                <img src="assets (1)/2.png" alt="" onclick="changeMainImage(this)" class="w-[100px] h-auto border-black rounded cursor-pointer">
                <img src="assets (1)/3.png" alt="" onclick="changeMainImage(this)" class="w-[100px] h-auto border-black rounded cursor-pointer">
                <img src="assets (1)/4.png" alt="" onclick="changeMainImage(this)" class="w-[100px] h-auto border-black rounded cursor-pointer">
            </div>
        </div>
        
        <!-- Overlay for Centered Image -->
        <div id="overlay" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 opacity-0 transition-opacity">
            <img id="centeredImage" src="" class="max-w-[90%] max-h-[90%]">
        </div>
        
        <script>
        function changeMainImage(thumbnail) {
            const mainImage = document.getElementById("mainImage");
            mainImage.src = thumbnail.src;
            
            // Remove border from all thumbnails
            const thumbnails = document.querySelectorAll(".flex.flex-row img");
            thumbnails.forEach((thumb) => {
                thumb.classList.remove("border-2");
            });
            
            // Add border to the clicked thumbnail
            thumbnail.classList.add("border-2");
        }
        
        function openImageInCenter() {
            const overlay = document.getElementById("overlay");
            const centeredImage = document.getElementById("centeredImage");
            const mainImage = document.getElementById("mainImage");
        
            centeredImage.src = mainImage.src; // Set centered image to main image source
            overlay.classList.remove("hidden"); // Show overlay
            
            // Fade-in effect
            setTimeout(() => {
                overlay.style.opacity = "1"; // Make overlay appear with opacity 1
            }, 5); // Short delay to trigger the transition
        }
        
        // Add event listener to close overlay when clicking anywhere on it
        document.getElementById("overlay").addEventListener("click", function() {
            const overlay = this;
            
            // Fade-out effect
            overlay.style.transition = "opacity 1s ease"; // Transition for opacity
            overlay.style.opacity = "0"; // Fade out the overlay
            
            // After fade-out, hide the overlay and reset opacity for future interactions
            setTimeout(() => {
                overlay.classList.add("hidden"); // After transition, hide overlay
                overlay.style.opacity = "0"; // Ensure opacity is reset to 0
            }, 500); // Match this timeout with the transition duration
        });
        
        // Apply default border to the first thumbnail on page load
        window.onload = () => {
            const firstThumbnail = document.querySelector(".flex.flex-row img");
            if (firstThumbnail) {
                firstThumbnail.classList.add("border-2"); // Add border to the first image
            }
        };
        </script>
        
        
        
        
        
        <div class="flex flex-col">
            <p class="text-gray-500 text-sm">Big Bearm Farm</p>
            <p class="text-3xl font-bold"><%=Item.name%></p>
            <p class="pt-2">⭐⭐⭐⭐ 45 reviews</p>
            <div class="flex flex-row pt-4">
                <span class="text-lg pr-8">Rs.375.00</span>
                <button class="bg-gray-900 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-2xl">
                    <span class="">Sold-out</span>
                </button>
                  
            </div>
            <p class="text-sm text-gray-500">Tax included.Shipping calculated at checkout</p>

            <div class="w-[`300px] sm:w-[500px] sm:text-xl pt-4">
                Farm fresh tangy tomatoes combined with the crisp, sharp,
                flavour of mustard - in true Himachali style!
            </div>
            <p class="pt-8">Quantity</p>
                <div class="flex sm:flex-row flex-col items-center space-x-2 pt-4 pb-4 gap-4">
                    <div class="flex flex-row">
                        <!-- Decrement button -->
                    <!-- <button 
                    onclick="decrement()" 
                    class="bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400"
                >
                    -
                </button> -->
                
                <!-- Quantity input -->
                <!-- <input 
                    id="quantity" 
                    type="number" 
                    value="1" 
                    min="1" 
                    class="w-16 text-center border border-gray-300 rounded"
                > -->
                
                <!-- Increment button -->
                <!-- <button 
                    onclick="increment()" 
                    class="bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400"
                >
                    +
                </button>
                    </div> -->
                    <a href="/product/<%=Item.name%>"><button class="text-white button bg-[#72173f] px-16 font-semibold py-2 border-2 border-gray-500 rounded-xl hover:border-4">Add To Cart</button></a>

                </div>

            
            <script>
                function increment() {
                    const quantityInput = document.getElementById("quantity");
                    let quantity = parseInt(quantityInput.value);
                    quantityInput.value = quantity + 1;
                }
            
                function decrement() {
                    const quantityInput = document.getElementById("quantity");
                    let quantity = parseInt(quantityInput.value);
                    if (quantity > 1) {
                        quantityInput.value = quantity - 1;
                    }
                }
            </script>
            <button class="button bg-transparent font-semibold py-2 border-2 px-[90px] border-gray-500 rounded-xl hover:border-4">Buy Now</button>
            
        </div>
    </div>
</div>
<%- include('partials/footer');%>